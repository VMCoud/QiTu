import{H as ce,T as de}from"./components.0236783c.js";import{_ as pe}from"./nuxt-link.1ccb43b1.js";import{p as fe,d as Y,q as _e,s as F,x as me,o as x,c as W,n as ve,y as ge,e as n,a2 as ye,r as y,u as he,a as xe,A as X,b as j,g as f,w as i,t as L,j as A,i as J,F as K,l as Z,M as p,f as w,h as H,S as we,X as be}from"./entry.f3a6b6f6.js";import{a2 as ke,a as Ce,m as Se,d as Ve}from"./api.75434be6.js";import{m as G,H as Q}from"./index.7f22f95f.js";import{u as $e}from"./counter.8b7d25a0.js";import{m as Be}from"./index.148f5fd9.js";import{I as Ne}from"./index.25e3049d.js";import{I as Te}from"./index.bdfe728d.js";import"./katex.69619638.js";const Oe=Y({name:"IconPlayArrow",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:u=>["butt","round","square"].includes(u)},strokeLinejoin:{type:String,default:"miter",validator:u=>["arcs","bevel","miter","miter-clip","round"].includes(u)},rotate:Number,spin:Boolean},emits:{click:u=>!0},setup(u,{emit:B}){const b=_e("icon"),N=F(()=>[b,`${b}-play-arrow`,{[`${b}-spin`]:u.spin}]),T=F(()=>{const z={};return u.size&&(z.fontSize=me(u.size)?`${u.size}px`:u.size),u.rotate&&(z.transform=`rotate(${u.rotate}deg)`),z});return{cls:N,innerStyle:T,onClick:z=>{B("click",z)}}}}),Ee=["stroke-width","stroke-linecap","stroke-linejoin"],ze=n("path",{d:"M12.533 7.965A1 1 0 0 0 11 8.81v30.377a1 1 0 0 0 1.533.846L36.656 24.84a1 1 0 0 0 0-1.692L12.533 7.965Z"},null,-1),Ae=[ze];function Je(u,B,b,N,T,S){return x(),W("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:ve(u.cls),style:ge(u.innerStyle),"stroke-width":u.strokeWidth,"stroke-linecap":u.strokeLinecap,"stroke-linejoin":u.strokeLinejoin,onClick:B[0]||(B[0]=(...z)=>u.onClick&&u.onClick(...z))},Ae,14,Ee)}var R=fe(Oe,[["render",Je]]);const He=Object.assign(R,{install:(u,B)=>{var b;const N=(b=B==null?void 0:B.iconPrefix)!=null?b:"";u.component(N+R.name,R)}}),Ie={class:"main overflow-auto ai-app-appid"},je={class:"w-full pb-20"},Le={class:"mx-auto max-w-7xl px-4 pt-10 sm:px-6 lg:px-8"},We={class:"flex","aria-label":"Breadcrumb"},qe={role:"list",class:"flex items-center space-x-4"},Pe=n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",class:"h-5 w-5 flex-shrink-0"},[n("path",{"fill-rule":"evenodd",d:"M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z","clip-rule":"evenodd"})],-1),De=n("span",{class:""},"应用列表",-1),Me={class:"mx-auto flex max-w-3xl flex-col items-center justify-center py-2"},Re={class:"mt-12 flex w-full flex-1 flex-col items-center justify-center px-4 sm:mt-20"},Ue={class:"max-w-[708px] text-4xl font-bold text-slate-900 sm:text-6xl"},Fe={class:"mt-6 text-lg leading-8 text-gray-600"},Xe={class:"flex w-full max-w-xl flex-col items-center"},Ke={class:"flex gap-4 self-end"},Ze=["innerHTML"],Ge=n("span",{class:"ant_hide"},"复制内容",-1),Qe=n("h6",{class:"mb-3"},"大模型选择",-1),Ye=n("h6",{class:"mb-3"},"模型选择",-1),et={class:"dialog-footer"},tt={class:"qas"},at={class:"mx-auto max-w-7xl py-16 px-6 sm:py-24 lg:px-8"},lt=n("h2",{class:"text-2xl font-bold leading-10 tracking-tight text-gray-900"},"小应用可以做什么",-1),st=n("p",{class:"mt-6 max-w-2xl text-base leading-7 text-gray-600"}," 问答系统：根据用户提供的问题生成有关某个主题的答案。 文本摘要：从长文章中提取关键信息，生成简洁易懂的摘要。 语言翻译：将文本从一种语言翻译成另一种语言。 代码生成：根据用户提供的描述自动生成代码片段。 创意写作：为用户生成短篇或长篇的创意性文本，如故事、博客文章、广告文案等。 ",-1),ot={class:"mt-20"},nt={class:"space-y-16 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:gap-y-16 sm:space-y-0 lg:grid-cols-3 lg:gap-x-10"},rt={class:"text-base font-semibold leading-7 text-gray-900"},it={class:"mt-2 text-base leading-7 text-gray-600"},wt=Y({__name:"[appid]",setup(u){const B=ye(),b=y(B.params.appid),N=he("token"),T=y({}),S=$e();xe({meta:[{name:"description",content:S.setting.description},{name:"keywords",content:S.setting.keywords}]}),(()=>{ke({appid:b.value}).then(a=>{T.value=a._rawValue.data,C.value=T.value.test_input})})();const ee=a=>G({linkify:!0,highlight:(t,d)=>{if(d&&Q.getLanguage(d))try{return`<pre class="hljs"><span ref="preCopy" class="pre_copy">Copy</span><code>${Q.highlight(t,{language:d,ignoreIllegals:!0}).value}</code></pre>`}catch{}return`<pre class="hljs"><span ref="preCopy" class="pre_copy">Copy</span><code>${G().utils.escapeHtml(t)}</code></pre>`},breaks:!0}).use(Be).render(a),{public:{baseUrl:D}}=be(),M={Authorization:`Bearer ${N.value}`,Accept:"text/event-stream"},k=y(),r=y(!1),v=y(""),C=y(""),te=async()=>{var $;if(v.value="",r.value=!0,!N.value)return p.warning("请先登录"),!1;const a=await fetch(`${D}api/now_app`,{method:"POST",headers:M,body:JSON.stringify({code:C.value,appid:b.value,model_is_select:_.value})});if(C.value.length=="")return r.value=!1,p.error("内容不得为空"),!1;if(a.status==500)return r.value=!1,p.error("服务器错误"),!1;if(a.status==401)return r.value=!1,p.error("请先登录"),!1;if(a.status==402)return r.value=!1,p.error("发送次数已达上限或余额不足"),!1;if(a.status==403)return r.value=!1,p.error("禁止发送违禁词"),!1;const t=($=a.body)==null?void 0:$.getReader(),d=({value:h})=>{let c=new TextDecoder().decode(h).split(`

`).map(l=>l.replace(/\n/g,"")),s=[];for(let l=0;l<c.length;l++)if(c[l].slice(-2)=="]}"&&c[l].startsWith("data:"))s.push(JSON.parse(c[l].replace("data:","")));else if(c[l].startsWith("data:")&&c[l].slice(-2)!="]}")k.value=c[l].replace("data:","");else if(c[l].slice(-2)=="]}"&&c[l].startsWith("data:")==!1){let e=k.value+=c[l];s.push(JSON.parse(e.replace("data:",""))),k.value=""}else c[l].includes('"error"')&&(v.value=JSON.parse(c[l]).error.message),k.value="";for(let l=0;l<s.length;l++)setTimeout(()=>{s[l].choices[0].delta.content&&(v.value+=s[l].choices[0].delta.content)},100)},O=async()=>{const h=await(t==null?void 0:t.read());h!=null&&h.done?(r.value=!1,C.value=""):(d(h),await O())};await O()},U=y([]);(()=>{Ce().then(a=>{U.value=a._rawValue.data}).catch(a=>{console.log(a)})})();const ae=a=>{Ve({id:a}).then(t=>{p.success(t._rawValue.message)}).catch(t=>{console.log(t)})},le=a=>{const t=document.createElement("input");t.setAttribute("readonly","readonly"),t.setAttribute("value",a.replace(/&nbsp;/g," ")),document.body.appendChild(t),t.select(),document.execCommand("copy")&&(document.execCommand("copy"),p.success("复制成功")),document.body.removeChild(t)},P=y(!1),_=y(),se=y([]),V=y(""),oe=y(1),ne=y(4),q=y([]);X(_,a=>{if(a=="ErnieBot")V.value="Ernie-Bot";else if(a=="ErnieBotTurbo")V.value="Ernie-Bot-turbo";else if(a=="xf")V.value="XF-Cloud";else{const t=Object.values(q.value);for(let d=0;d<t.length;d++)t[d].model==a&&(V.value=t[d].title)}});const g=y(S.setting.gpt_new_qs_open=="1"?"gpt":S.setting.fly_qs_open=="1"?"fly":"baidu");X(g,a=>{a=="gpt"?(_.value=q.value[0].model,V.value=q.value[0].title):a=="fly"?(_.value="xf",V.value="XF-Cloud"):a=="baidu"&&(_.value="ErnieBot",V.value="Ernie-Bot")}),(()=>{Se({page:oe.value,limit:ne.value}).then(a=>{se.value=a._rawValue.p_data,q.value=a._rawValue.model,g.value=="gpt"?_.value=a._rawValue.model[0].model:g.value=="fly"?_.value="xf":g.value=="baidu"&&(_.value="ErnieBot"),g.value=="gpt"?V.value=a._rawValue.model[0].title:g.value=="fly"?V.value="xf":g.value=="baidu"&&(V.value="ErnieBot")}).catch(a=>{console.log(a)})})();const re=()=>{g.value=="gpt"?te():g.value=="fly"?ie():g.value=="baidu"&&ue()},ie=async()=>{var h;if(v.value="",r.value=!0,!N.value)return p.warning("请先登录"),!1;r.value=!0;const a=await fetch(`${D}api/app_send_fly_msg`,{method:"POST",headers:M,body:JSON.stringify({code:C.value,appid:b.value,model_is_select:_.value})});if(C.value.length=="")return r.value=!1,p.error("内容不得为空"),!1;if(a.status==500)return r.value=!1,p.error("服务器错误"),!1;if(a.status==401)return r.value=!1,p.error("请先登录"),!1;if(a.status==402)return r.value=!1,p.error("发送次数已达上限或余额不足"),!1;if(a.status==403)return r.value=!1,p.error("禁止发送违禁词"),!1;let t=!1;const d=(h=a.body)==null?void 0:h.getReader(),O=({value:m})=>{let s=new TextDecoder().decode(m).split(`

`).map(e=>e.replace(/\n/g,"")),l=[];for(let e=0;e<s.length;e++){if(s[e].slice(-2)=="}}"&&s[e].startsWith("data:"))l.push(JSON.parse(s[e].replace("data:","")));else if(s[e].startsWith("data:")&&s[e].slice(-2)!="]}")k.value=s[e].replace("data:","");else if(s[e].slice(-2)=="}}"&&s[e].startsWith("data:")==!1){let I=k.value+=s[e];l.push(JSON.parse(I.replace("data:",""))),k.value=""}else s[e].includes('"error"')&&(v.value=JSON.parse(s[e]).error.message),k.value="";if(s[e].includes("reply_content:")&&(t=!0),t){let o=s[e].substring(14);for(let E=0;E<o.length;E++)setTimeout(()=>{v.value+=o.charAt(E)},1e3)}}for(let e=0;e<l.length;e++)setTimeout(()=>{l[e].payload.choices.text[0].content&&(v.value+=l[e].payload.choices.text[0].content)},100)},$=async()=>{const m=await(d==null?void 0:d.read());m!=null&&m.done?(r.value=!1,C.value=""):(r.value=!0,O(m),await $())};await $()},ue=async()=>{var h;if(v.value="",r.value=!0,!N.value)return p.warning("请先登录"),!1;const a=await fetch(`${D}api/${_.value=="ErnieBot"?"app_run_baidu_send":"app_run_baidu_send_turbo"}`,{method:"POST",headers:M,body:JSON.stringify({code:C.value,appid:b.value,model_is_select:_.value})});if(C.value.length=="")return r.value=!1,p.error("内容不得为空"),!1;if(a.status==500)return r.value=!1,p.error("服务器错误"),!1;if(a.status==401)return r.value=!1,p.error("请先登录"),!1;if(a.status==402)return r.value=!1,p.error("发送次数已达上限或余额不足"),!1;if(a.status==403)return r.value=!1,p.error("禁止发送违禁词"),!1;let t=!1;const d=(h=a.body)==null?void 0:h.getReader(),O=({value:m})=>{let c=new TextDecoder().decode(m);console.log(c);let s=c.split(`

`).map(e=>e.replace(/\n/g,"")),l=[];for(let e=0;e<s.length;e++){if(s[e].slice(-2)=="}}"&&s[e].startsWith("data:"))l.push(JSON.parse(s[e].replace("data:","")));else if(s[e].startsWith("data:")&&s[e].slice(-2)!="]}")k.value=s[e].replace("data:","");else if(s[e].slice(-2)=="}}"&&s[e].startsWith("data:")==!1){let I=k.value+=s[e];l.push(JSON.parse(I.replace("data:",""))),k.value=""}else s[e].includes('"error_msg"')&&(v.value=JSON.parse(s[e]).error_msg),k.value="";if(s[e].includes("reply_content:")&&(t=!0),t){let o=s[e].substring(14);for(let E=0;E<o.length;E++)setTimeout(()=>{v.value+=o.charAt(E)},1e3)}}for(let e=0;e<l.length;e++)setTimeout(()=>{l[e].result&&(v.value+=l[e].result)},100)},$=async()=>{const m=await(d==null?void 0:d.read());m!=null&&m.done?(r.value=!1,C.value=""):(r.value=!0,O(m),await $())};await $()};return(a,t)=>{const d=de,O=ce,$=pe,h=j("a-tag"),m=j("a-textarea"),c=j("a-button"),s=j("a-space"),l=j("a-radio"),e=j("a-radio-group"),I=j("a-modal");return x(),W("main",Ie,[f(O,null,{default:i(()=>[f(d,null,{default:i(()=>[w(L(T.value.title)+" - "+L(H(S).setting.title),1)]),_:1})]),_:1}),n("div",je,[n("div",Le,[n("nav",We,[n("ol",qe,[n("li",null,[n("div",null,[f($,{class:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-500",to:"/ai_application"},{default:i(()=>[Pe,De]),_:1})])])])]),n("div",Me,[n("main",Re,[n("h1",Ue,L(T.value.title),1),n("p",Fe,L(T.value.description),1),f(h,{color:"arcoblue",class:"cursor-pointer mt-4",onClick:t[0]||(t[0]=o=>P.value=!0)},{icon:i(()=>[f(H(Ne))]),default:i(()=>[w(" 预设配置 ")]),_:1}),n("div",Xe,[f(m,{"auto-size":{minRows:3,maxRows:12},modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=o=>C.value=o),disabled:r.value,class:"mt-5","allow-clear":"","show-word-limit":"",placeholder:"请输入点什么吧~"},null,8,["modelValue","disabled"]),n("div",Ke,[f(s,null,{default:i(()=>[f(c,{type:"primary",status:"warning",size:"large",round:"",onClick:t[2]||(t[2]=o=>ae(T.value.id)),class:"mx-atuo mt-8 rounded-xl bg-black px-8 py-2 font-medium text-white hover:bg-black/80 sm:mt-10"},{icon:i(()=>[f(H(Te))]),default:i(()=>[w(" 收藏 ")]),_:1}),f(c,{type:"primary",size:"large",round:"",onClick:t[3]||(t[3]=o=>re()),loading:r.value,class:"mx-atuo mt-8 rounded-xl bg-black px-8 py-2 font-medium text-white hover:bg-black/80 sm:mt-10"},{icon:i(()=>[f(H(He))]),default:i(()=>[w(" 运行 ")]),_:1},8,["loading"])]),_:1})]),v.value?(x(),W("div",{key:0,class:"output_content my-10 w-full space-y-10 bg-white rounded p-3 shadow-sm",innerHTML:ee(v.value).replace(/\\n/g,`
`)},null,8,Ze)):A("",!0),v.value?(x(),J(c,{key:1,class:"h-30",type:"primary",onClick:t[4]||(t[4]=o=>le(v.value.replace(/\\n/g,`
`)))},{default:i(()=>[f(H(we)),Ge]),_:1})):A("",!0)])])])]),f(I,{visible:P.value,"onUpdate:visible":t[10]||(t[10]=o=>P.value=o),class:"mb_dialog"},{title:i(()=>[w(" 预设配置 ")]),footer:i(()=>[n("span",et,[f(c,{type:"primary",onClick:t[9]||(t[9]=o=>P.value=!1)},{default:i(()=>[w(" 配置完成 ")]),_:1})])]),default:i(()=>[Qe,f(e,{class:"mb-3 flex-wrap",modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=o=>g.value=o),type:"button"},{default:i(()=>[H(S).setting.gpt_new_qs_open=="1"?(x(),J(l,{key:0,value:"gpt"},{default:i(()=>[w("AI大模型")]),_:1})):A("",!0),H(S).setting.fly_qs_open=="1"?(x(),J(l,{key:1,value:"fly"},{default:i(()=>[w("星火大模型")]),_:1})):A("",!0),H(S).setting.wenxin_baidu_open=="1"?(x(),J(l,{key:2,value:"baidu"},{default:i(()=>[w("文心大模型")]),_:1})):A("",!0)]),_:1},8,["modelValue"]),Ye,g.value=="gpt"?(x(),J(e,{key:0,class:"mb-3 flex-wrap",modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=o=>_.value=o),type:"button"},{default:i(()=>[(x(!0),W(K,null,Z(q.value,(o,E)=>(x(),J(l,{key:E,value:o.model},{default:i(()=>[w(L(o.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):A("",!0),g.value=="fly"?(x(),J(e,{key:1,class:"mb-3 flex-wrap",modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=o=>_.value=o),type:"button"},{default:i(()=>[f(l,{value:"xf"},{default:i(()=>[w("XF-Cloud")]),_:1})]),_:1},8,["modelValue"])):A("",!0),g.value=="baidu"?(x(),J(e,{key:2,class:"mb-3 flex-wrap",modelValue:_.value,"onUpdate:modelValue":t[8]||(t[8]=o=>_.value=o),type:"button"},{default:i(()=>[f(l,{value:"ErnieBot"},{default:i(()=>[w("Ernie-Bot")]),_:1}),f(l,{value:"ErnieBotTurbo"},{default:i(()=>[w("Ernie-Bot-turbo")]),_:1})]),_:1},8,["modelValue"])):A("",!0)]),_:1},8,["visible"]),n("div",tt,[n("div",at,[lt,st,n("div",ot,[n("dl",nt,[(x(!0),W(K,null,Z(U.value,o=>(x(),W("div",{key:o.id},[n("dt",rt,L(o.title),1),n("dd",it,L(o.answer),1)]))),128))])])])])])])}}});export{wt as default};
